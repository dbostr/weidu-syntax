{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "weidu",
	"patterns": [
		{
			"include": "#keywords"
		},
		{
			"include": "#comments"
		},
		{
			"include": "#constants"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#storage"
		},
		{
			"include": "#entities"
		}
	],
	"repository": {
		"keywords": {
			"patterns": [
				{
					"name": "keyword.control.weidu",
					"match": "\\b(ACTION_IF|ACTION_FOR_EACH|ACTION_DEFINE_ASSOCIATIVE_ARRAY|ACTION_MATCH|ACTION_PHP_EACH|ACTION_TRY|AS|IN|BEGIN|BUT_ONLY|BUT_ONLY_IF_IT_CHANGES|END|ELSE|FOR|IF|PATCH_IF|THEN|UNLESS|WITH|DEFAULT|PHP_EACH)\\b"
				},
				{
					"name": "keyword.other.weidu",
					"match": "\\b(_INVALID_)\\b"
				},
				{
					"name": "invalid.weidu",
					"match": "\\b(FAIL)\\b"
				}
			]
		},
		"storage": {
			"patterns": [
				{
					"name": "storage.modifier.weidu",
					"match": "\\b(INT_VAR|STR_VAR|RET)\\b"
				},
				{
					"name": "variable.other.less.weidu",
					"match": "((@|#)\\d+|\\(\\s*AT \\\"\\w+\\\"\\s*\\))"
				},
				{
					"name": "entity.other.attribute-name.weidu",
					"match": "%\\w+%"
				}
			]
		},
		"entities": {
			"patterns": [
				{
					"name": "entity.name.class.weidu",
					"match": "\\b(ADD_KIT|INCLUDE|LAF|ALLOW_MISSING|AUTHOR|AUTO_TRA|APPEND|BACKUP|COPY|COPY_EXISTING|COPY_EXISTING_REGEXP|EXTEND_BOTTOM|EXTEND_TOP|LANGUAGE|LPF|REPLACE|SAY|VERSION)\\b"
				},
				{
					"name": "entity.name.type.weidu",
					"match": "\\b(DEFINE_ACTION_FUNCTION|DEFINE_PATCH_FUNCTION|LAUNCH_ACTION_FUNCTION|LAUNCH_PATCH_FUNCTION)\\b"
				},
				{
					"name": "support.function.weidu",
					"match": "\\b(READ_SHORT|READ_LONG|WRITE_SHORT|WRITE_LONG|PRINT|PATCH_PRINT|SPRINT|GET_OFFSET_ARRAY|GET_OFFSET_ARRAY2|READ_2DA_ENTRY_FORMER|COUNT_2DA_COLS|READ_2DA_ENTRY_FORMER|STRING_EQUAL_CASE|SET|ADD_SPELL_EFFECT|ADD_CRE_EFFECT|READ_2DA_ENTRIES_NOW|ALTER_EFFECT|IDS_OF_SYMBOL|RESOLVE_STR_REF|READ_BYTE|WRITE_BYTE)\\b"
				},
				{
					"name": "meta.selector.weidu",
					"match": "\\b(opcode|match_opcode|target|timing|parameter1|parameter2|special|resist_dispel|resource)(\\b|=)"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"match": "\\b(0x(\\d|[a-f]|[A-F])+|\\d+)\\b",
					"name": "constant.numeric.weidu"
				},
				{
					"match": "\\b(GLOB|BIT6|ITM_V10_HEAD_EFFECTS|SOURCE_SIZE|~override~)\\b",
					"name": "constant.language.weidu"
				},
				{
					"name": "constant.regexp.weidu",
					"match": "\\b(AND|OR|&|BOR)\\b"
				}
			]
		},
		"comments":{
			"patterns": [
				{
					"name": "comment.block.weidu",
					"begin": "/\\*",
					"end": "\\*/",
					"scope": "punctuation.definition.comment.weidu",
					"contentName":"comment.block"
				},
				{ 
					"match": "//.*$", 
					"name": "comment.line.weidu",
					"scope": "punctuation.definition.comment.weidu"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.single.weidu",
					"begin": "~",
					"end": "~",
					"patterns": [
						{
							"name": "constant.character.escape.weidu",
							"match": "\\\\."
						},
						{
							"name": "constant.regexp.weidu",
							"match": "\\b(override)\\b"
						},
						{
							"name": "entity.other.attribute-name",
							"match": "%\\w+%"
						}
					]
				},
				{
					"name": "string.quoted.double.weidu",
					"begin": "\"",
					"end": "\"",
						"patterns": [
							{
								"name": "constant.character.escape.weidu",
								"match": "\\\\."
							},
							{
								"name": "constant.regexp.weidu",
								"match": "\\b(override)\\b"
							},
							{
								"name": "entity.other.attribute-name",
								"match": "%\\w+%"
							}
						]

				}
			]
		}
	},
	"scopeName": "source.weidu"
}